<html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic&display=swap" rel="stylesheet">
  <style>
  body {
  font-family: 'Nanum Gothic';
  height: 125vh;
  margin-top: 9.9vw;
}

header {
  z-index: 5;
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 10vw;
  width: 100vw;
  background-color: white;
  width: 100%;
  height: 5.8vw;
  padding-bottom: 2.7vw;
  border-bottom: 0.28vw solid darkgray; 
}

a.phb {
  text-decoration: none;
  font-size: 2.35vw;
  letter-spacing: 0.18vw;
  color: rgb(38,35,38);
  background-color: rgb(251,251,251);
  border: 0.1em solid dodgerblue; 
  border-radius: 20em;
  box-shadow: 0.085em 0.16em 0.2em gray;
  padding: 1.37vw 1.67vw;
  position: fixed;
  top: 1.4vw; left: 0.65vw;
}

span.doing {
  font-style: italic;
  font-size: 1.36vw;
  margin-left: 1.0vw; 
  position: fixed;
  top: 5.4vw; left: 28.1vw
}

.main {
  padding: 1vw 1.5vw;
  margin-top: 9vw;
}

#userquery {
  width: 46.9vw;
  height: 3vw;
  font-size: 1.7vw;
  margin-bottom: 0.7vw;
}

.search {
  text-align: center;
  color: darkorange;
  border: 0.1em solid orange;
  border-radius: 0.8vw;
  box-shadow: 0.1vw 0.23vw 0.1vw gray;
  width: 6vw;
  height: 3.8vw;
  font-size: 1.45vw;
  padding: 0.3vw;
  margin-left: 1.3vw;
}

#results {
  padding: 0.6vw 0.6vw;
}

#intro {
  font-style: italic;
  font-size: 2.2vw;
  letter-spacing: 0.13vw;
}

poland {
  font-style: normal;
}

#hr {
  display: none
}

.sr {
  margin-bottom: 1.7vw; margin-top: 1.7vw;
  line-height: 2.86vw;
  font-size: 3.3vw;
  border-left: 0.3vw solid gray;
  border-radius: 0.1vw;
  padding-left: 1.2vw;
  padding-top: 0.7vw; padding-bottom: 0.3vw;
}

.qresult {
  border: 0.18vw solid darkgray;
  border-radius: 0.5vw;
  padding: 1vw 1.24vw;
  font-size: 1.5vw;
  text-align: justify;
  box-shadow: 0vw 0.2vw 0.4vw dodgerblue;
}

.aresult {
  border: 0.18vw solid darkgray;
  border-radius: 0.5vw;
  padding: 1vw 1.24vw;
  font-size: 1.5vw;
  text-align: justify;
  box-shadow: 0vw 0.2vw 0.4vw orange;
}

.srq {
  font-size: 1.5vw;
  font-style: italic;
    margin-left: 0.2vw
}
  </style>
</head>
<body>
  <header> 
    <a href = "https://mrbossosity.github.io/2.0/2.1.html" class = 'phb'>ProtoHISTORYbowl</a>
    <span class = "doing">searching 2016-2019 NHBB A-set, Nationals Bee, and USHB better than everyone else</span>
  </header>
  <div class = "main">
    <input type = "text" id = "userquery">
    <button id = "search" class = "search">Search!</button>
    <div id = "results">
      <div id = "hr"><hr></div>
      <div id = "qresults"></div>
        <hr>
      <div id = "aresults"></div>
      <div id = "intro"><p>search for a keyword or phrase, e.g. <poland>Poland</poland></p></div>
    </div>
  </div>
  
<script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/a-bee.js"></script> 
<script src = "https://mrbossosity.github.io/2.0/ihbb/b-set/b-bee-2016.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/b-set/b-bee-2017.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/b-set/b-bee-2018.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/b-set/b-bee-2019.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/c-set/c-bee-2016.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/c-set/c-bee-2017.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/c-set/c-bee-2018.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/c-set/c-bee-2019.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/nats/nats-bee-2016.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/nats/nats-bee-2017.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/nats/nats-bee-2018.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/nats/nats-bee-2019.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/ushb/ushb-2016.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/ushb/ushb-2017.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/ushb/ushb-2018.js"></script>
<script src = "https://mrbossosity.github.io/2.0/ihbb/ushb/ushb-2019.js"></script>

<script>
const abee = abee20162019
.split(/(?=\(\d+\))/g)
.map((substr) => {
  const [question, ANSWER] = substr.split(/(?=ANSWER)/);
  return { question, ANSWER };
});
  
const b2016 = bbee2016
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const b2017 = bbee2017
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const b2018 = bbee2018
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const b2019 = bbee2019
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const c2016 = cbee2016
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });
const c2017 =cbee2017
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const c2018 = cbee2018
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const c2019 = cbee2019
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const nb2016 = natsbee2016
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const nb2017 = natsbee2017
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const nb2018 = natsbee2018
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const nb2019 = natsbee2019
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const u2016 = ushb2016
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const u2017 = ushb2017
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const u2018 = ushb2018
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const u2019 = ushb2019
  .split(/(?=\(\d+\))/g)
  .map((substr) => {
    const [question, ANSWER] = substr.split(/(?=ANSWER)/);
    return { question, ANSWER };
  });

const array = abee.concat(nb2016, nb2017, nb2018, nb2019, u2016, u2017, u2018, u2019)

var query;
var qnumber;
var anumber;

function init() {
  $("#intro").css("display", "none");
  query = $("#userquery").val();
  query = query.toUpperCase();
  $("#hr").css("display", "inline");
}

function processquestionquery() {
  $("#userquery").blur();
  $("#qresults").html("<p id = 'srq' class = 'sr'>Search Results – Tossup</p><hr>");
  qnumber = 0;
}

function processanswerquery() {
  $("#aresults").html("<p id = 'arq' class = 'sr'>Search Results – Answer</p>");
  anumber = 0;
}

$("#search").on("click", function() {
  init();
  questionquery();
  answerquery()
})
                
function questionquery() {
  processquestionquery();
  for (var i = 0; i < array.length; i++) {
    if (array[i].question.toUpperCase().includes(query)) {
      var question = array[i].question;
      var answer = array[i].ANSWER;
      var answer = answer.replace(" (", "");
      document.getElementById("qresults").innerHTML += ("<p class = 'qresult'>" + question + "<br><br>" + answer + " (" + i + ")</p>");
      qnumber += 1;  
    };
  };
  document.getElementById("srq").innerHTML += ("<br><span class = 'srq'>" + qnumber + " " + "questions found </span>")
}

function answerquery() {
  processanswerquery();
  for (var k = 0; k < array.length; k++) {
    if (array[k].ANSWER.toUpperCase().includes(query)) {
      var aquestion = array[k].question;
      var aanswer = array[k].ANSWER;
      var aanswer = aanswer.replace(" (", "");
      document.getElementById("aresults").innerHTML += ("<p class = 'aresult'>" + aquestion + "<br><br>" + aanswer + " (" + k + ")</p>");
      anumber += 1;  
    };
  };
  document.getElementById("arq").innerHTML += ("<br><span class = 'srq'>" + anumber + " " + "answers found </span>")
}

$("#userquery").keydown(function(e) {
  if (e.keyCode === 13) {
    $("#search").click();
  };
})
</script>
</body>
</html>
